> 增删改查

------------

##### DDL（Data Definition Language）：数据定义语言
##### DML（Data Manipulation Language）：数据操作语言

------------

- 创建表

```sql
CREATE TABLE CT_MASKMOUNTRESERVE
(
  MACHINENAME   VARCHAR2(100)   NOT NULL,
  PORTNAME      VARCHAR2(100)   NOT NULL,
  MASKNAME      VARCHAR2(100)   NOT NULL,
  EVENTCOMMENT  VARCHAR2(2000),
  EVENTTIME     DATE            
)
```

------------


- 表新增列

```sql
ALTER TABLE CT_CRUCIBLE ADD SPAREFLAG VARCHAR2(40)
```

------------

- 删除表（结构）

```sql
DROP TABLE CT_MASKMOUNTRESERVE
```

------------

- 删除表（数据）

```sql
// 过程是系统一次性删除数据，效率比较高
TRUNCATE TABLE SCORE_INF

// 过程是系统一行一行的删，效率比 TRUNCATE 低
DELETE table SCORE_INF
```

------------

- 表删除列

```sql
ALTER TABLE CT_QUEUETIME4SPEC DROP COLUMN LOTNAME
```

------------

- 表重新设置主键

```sql
ALTER TABLE CT_QUEUETIMESET4SPEC DROP CONSTRAINT CT_QUEUETIMESET4SPEC_PK 
ALTER TABLE CT_QUEUETIMESET4SPEC ADD PRIMARY KEY(FROMFACTORYNAME, FROMPRODUCTSPEC, FROMPRODUCTFLOW, FROMOPERATION,TOFACTORYNAME, TOPRODUCTSPEC, TOPRODUCTFLOW, TOOPERATION)
```

------------

- 修改列名

```sql
ALTER TABLE CT_GLASSRESERVEHISTORY RENAME COLUMN EVENTCOMMENT TO TMP_EVENTCOMMENT
```

------------

- 修改某一列的属性

```sql
ALTER TABLE CT_GLASSRESERVEHISTORY RENAME COLUMN EVENTCOMMENT TO TMP_EVENTCOMMENT
ALTER TABLE CT_GLASSRESERVEHISTORY ADD EVENTCOMMENT VARCHAR2(500)
UPDATE CT_GLASSRESERVEHISTORY SET EVENTCOMMENT = TRIM(TMP_EVENTCOMMENT)
ALTER TABLE CT_GLASSRESERVEHISTORY DROP COLUMN TMP_EVENTCOMMENT
```


------------
- 修改某一列的属性

```sql
ALTER TABLE product MODIFY turnoverflag VARCHAR2(3);
```


------------


- 插入数据


```sql
INSERT INTO CT_MASKMOUNTRESERVE
  (MACHINENAME, PORTNAME, MASKNAME, EVENTUSER, EVENTCOMMENT, EVENTTIME)
VALUES
  (:MACHINENAME,
   :PORTNAME,
   :MASKNAME,
   :EVENTUSER,
   :EVENTCOMMENT,
   TO_DATE(:EVENTTIME, 'yyyy/MM/ddHH24:mi:ss'))
```


------------

- 插入数据（循环插入）


```sql
declare
      LOTNAME              VARCHAR2(100);
      CSTID                VARCHAR2(100);
      ABNORMALTYPE         VARCHAR2(100);
      DEPARTMENT           VARCHAR2(100);
      PROCESSOPERATIONNAME VARCHAR2(100);
      PROCESSOPERATIONDESC VARCHAR2(100);
      STAYTIME             VARCHAR2(100);
      PROCESSSTATE         VARCHAR2(100);
      HOLDFLAG             VARCHAR2(100);
      DSPFLAG              VARCHAR2(100);
begin      
     for item in (SELECT * FROM CT_ABNORMALLOT) loop
         LOTNAME := item.LOTNAME;
         CSTID := item.CSTID;
         ABNORMALTYPE := item.ABNORMALTYPE;
         DEPARTMENT := item.DEPARTMENT;
         PROCESSOPERATIONNAME := item.PROCESSOPERATIONNAME;
         PROCESSOPERATIONDESC := item.PROCESSOPERATIONDESC;
         STAYTIME := item.STAYTIME;
         PROCESSSTATE := item.PROCESSSTATE;
         HOLDFLAG := item.HOLDFLAG;
         DSPFLAG := item.DSPFLAG;
         INSERT INTO CT_ABNORMALLOTHIS (LOTNAME,CSTID,ABNORMALTYPE,DEPARTMENT,PROCESSOPERATIONNAME,PROCESSOPERATIONDESC,STAYTIME,PROCESSSTATE,HOLDFLAG,DSPFLAG,EVENTNAME,EVENTTIME,EVENTUSER)VALUES(LOTNAME,CSTID,ABNORMALTYPE,DEPARTMENT,PROCESSOPERATIONNAME,PROCESSOPERATIONDESC,STAYTIME,PROCESSSTATE,HOLDFLAG,DSPFLAG,:EVENTNAME,TO_DATE(:EVENTTIME, 'yyyy-mm-dd hh24:mi:ss'),:EVENTUSER);
      end loop; 
      commit;   
end;
```

------------


- 更新数据

```sql
UPDATE CT_ABNORMALLOT A
   SET A.DEPARTMENT    = :DEPARTMENT,
       A.LASTEVENTNAME = :LASTEVENTNAME,
       A.LASTEVENTTIME = TO_DATE(:LASTEVENTTIME, 'yyyy-mm-dd hh24:mi:ss'),
       A.LASTEVENTUSER = :LASTEVENTUSER
 WHERE A.LOTNAME = :LOTNAME
```

------------

- 如果条件参数不为空就查询，为空就当条件不存在

```sql
SELECT *
  FROM CT_MASKMOUNTRESERVE
 WHERE (:MACHINENAME IS NULL OR MACHINENAME = :MACHINENAME)
   AND (:PORTNAME IS NULL OR PORTNAME = :PORTNAME)
   AND (:MASKNAME IS NULL OR MASKNAME = :MASKNAME)
```


